<!DOCTYPE html>
<html lang="en">
  <!--
    <script
      type="text/javascript"
      src="../../build/Box2D_v2.2.1_min.js"
    ></script>
    <script
      type="text/javascript"
      src="../../helpers/embox2d-helpers.js"
    ></script>
    <script
      type="text/javascript"
      src="../../helpers/embox2d-html5canvas-debugDraw.js"
    ></script>
    <script
      type="text/javascript"
      src="embox2d-html5canvas-testbed.js"
    ></script>

    <script type="text/javascript" src="tests/fallingShapes.js"></script>
    <script type="text/javascript" src="tests/pyramid.js"></script>
    <script type="text/javascript" src="tests/car.js"></script>
    <script type="text/javascript" src="tests/balancedMobile.js"></script>
    <script type="text/javascript" src="tests/pulleyJoint.js"></script>
    <script type="text/javascript" src="tests/ropeJoint.js"></script>
    <script type="text/javascript" src="tests/dominos.js"></script>
    <! - - <script type="text/javascript" src="tests/template.js"></script> - - >

    <script type="text/javascript">
      var Box2D;
      if (!Box2D)
        Box2D = (typeof Box2D !== 'undefined' ? Box2D : null) || Module;
      window.onload = function() {
        using(Box2D, 'b2.+');
        init();
        changeTest();
        animate();
      };
    </script>
  -->
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>
      Emscripten's Box2D demo, but with a Box2DWeb fork ported to TypeScript
    </title>
    <style>
      html,
      body,
      main {
        width: 100%;
        height: 100%;
      }

      body {
        font-family: sans-serif;
        margin: 0;
      }

      canvas {
        background-color: #333;
      }

      main {
        display: flex;
        align-items: center;
        flex-direction: column;
      }

      main > div {
        width: 640px;
      }

      header,
      footer {
        padding: 8px;
      }

      footer {
        background-color: #ddd;
      }

      footer > div {
        text-align: center;
      }

      p {
        margin-top: 0;
      }

      ul {
        margin: 0;
        padding: 0;
      }

      li {
        list-style-type: none;
      }
    </style>
  </head>
  <body>
    <main>
      <div>
        <header>
          <h2>
            Emscripten Box2D demo, but with a Box2DWeb fork ported to TypeScript
          </h2>
          <p>
            This demo uses TypeScript manually ported from JavaScript that was
            itself ported from an ActionScript port of the original C++.
          </p>
          <p>
            See
            <b>
              <a href="https://github.com/mysterycommand/box2dweb"
                >mysterycommand/box2dweb</a
              >
            </b>
            for more details.
          </p>
        </header>
        <!--
          If you change the size of the canvas, you'll also need to change
          the value of 'viewCenterPixel' in embox2d-html5canvas-testbed.js
        -->
        <canvas id="canvas" width="640" height="480" tabindex="1"></canvas>
        <footer>
          <div>
            <p>
              <button id="reloadButton" onclick="resetScene();">Reset</button>
              <button id="pauseButton" onclick="pause();">Pause</button>
              <button id="stepButton" onclick="step();">Single step</button>
              (Keyboard: R, P, S)
            </p>
            <p>
              Zoom <button id="zoomInButton" onclick="zoomIn();">&plus;</button>
              <button id="zoomOutButton" onclick="zoomOut();">&minus;</button>
              (Keyboard: X, Z)
            </p>
            <p>Hold down Shift while moving the mouse to pan (Keyboard: arrow keys)</p>
            <p>You need to click on the canvas before using the keyboard.</p>
            <p>
              <label for="testSelection">Test:</label>
              <select id="testSelection" onchange="changeTest();">
                <option value="embox2dTest_car">Car (use j/k to move)</option>
                <option value="embox2dTest_dominos">Dominos</option>
                <option value="embox2dTest_ropeJoint">Rope joint</option>
                <option value="embox2dTest_pulleyJoint">Pulley joint</option>
                <option value="embox2dTest_fallingShapes">Falling shapes</option>
                <option value="embox2dTest_pyramid">Pyramid</option>
                <option value="embox2dTest_balancedMobile"
                >Balanced mobile</option
                >
              </select>
            </p>
          </div>

          <p>Debug draw flags:</p>
          <ul>
            <li>
                <input
                  id="drawShapesCheck"
                  type="checkbox"
                  onclick="updateWorldFromDebugDrawCheckboxes();"
                /><label for="drawShapesCheck">Shapes</label>
            </li>
            <li>
                <input
                  id="drawJointsCheck"
                  type="checkbox"
                  onclick="updateWorldFromDebugDrawCheckboxes();"
                /><label for="drawJointsCheck">Joints</label>
            </li>
            <li>
                <input
                  id="drawAABBsCheck"
                  type="checkbox"
                  onclick="updateWorldFromDebugDrawCheckboxes();"
                /><label for="drawAABBsCheck">AABBs</label>
            </li>
            <li>
                <input
                  id="drawTransformsCheck"
                  type="checkbox"
                  onclick="updateWorldFromDebugDrawCheckboxes();"
                /><label for="drawTransformsCheck">Transforms</label>
            </li>
            <li>&nbsp;</li>
            <li>
                <input
                  id="showStatsCheck"
                  type="checkbox"
                  onclick="updateContinuousRefreshStatus();"
                /><label for="showStatsCheck">Show stats</label>
            </li>
          </ul>

          <span id="feedbackSpan"></span>
        </footer>
      </div>
    </main>
  </body>
</html>
